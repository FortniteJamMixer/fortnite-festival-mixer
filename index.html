<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fortnite Festival Pro Mixer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
  </style>
</head>
<body>
  <div id="app">
    <div class="min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-gray-900 text-white flex items-center justify-center">
      <div class="text-center">
        <div class="text-6xl mb-4">ðŸŽµ</div>
        <div class="text-2xl font-bold">Loading tracks...</div>
      </div>
    </div>
  </div>
  
  <script type="module">
    const camelotColors = {
      '1A': '#FF6B9D', '1B': '#FF8FAB', '2A': '#FFA07A', '2B': '#FFB699',
      '3A': '#FFD700', '3B': '#FFE55C', '4A': '#98D8C8', '4B': '#7FD8BE',
      '5A': '#6BCB77', '5B': '#8FD89F', '6A': '#4D96FF', '6B': '#6FB1FF',
      '7A': '#9D4EDD', '7B': '#B877FF', '8A': '#E84A5F', '8B': '#FF6B81',
      '9A': '#00D9FF', '9B': '#4DFFFF', '10A': '#FFA400', '10B': '#FFBB5C',
      '11A': '#FE6D73', '11B': '#FF8C94', '12A': '#A8E6CF', '12B': '#C1F0DD'
    };

    const keyToCamelot = {
      'C Major': '8B', 'A Minor': '8A', 'G Major': '9B', 'E Minor': '9A',
      'D Major': '10B', 'B Minor': '10A', 'A Major': '11B', 'F# Minor': '11A',
      'F#': '11A', 'Gb': '11A', 'E Major': '12B', 'C# Minor': '12A',
      'C#': '12A', 'Db': '12A', 'B Major': '1B', 'G# Minor': '1A',
      'F# Major': '2B', 'D# Minor': '2A', 'Db Major': '3B', 'Bb Minor': '3A',
      'Ab Major': '4B', 'F Minor': '4A', 'Eb Major': '5B', 'C Minor': '5A',
      'Bb Major': '6B', 'G Minor': '6A', 'F Major': '7B', 'D Minor': '7A',
      'G': '9B', 'E': '9A', 'D': '10B', 'B': '10A', 'A': '11A', 'C': '8B', 'F': '7B'
    };

    let songs = [];
    let ownedTracks = JSON.parse(localStorage.getItem('ownedTracks') || '[]');
    let selectedSong = null;
    let setlist = [];
    let searchTerm = '';
    let view = 'browser';
    let showOwnedOnly = false;

    async function loadSongs() {
      try {
        const response = await fetch('https://fortnitecontent-website-prod07.ol.epicgames.com/content/api/pages/fortnite-game/spark-tracks');
        const data = await response.json();
        
        songs = Object.entries(data)
          .filter(([key]) => !key.startsWith('_'))
          .map(([id, item]) => {
            const track = item.track;
            if (!track || !track.tt) return null;
            
            const fullKey = track.mk && track.mm ? `${track.mk} ${track.mm}` : null;
            const camelot = fullKey ? (keyToCamelot[fullKey] || keyToCamelot[track.mk] || '?') : '?';
            
            return {
              id,
              title: track.tt,
              artist: track.an || 'Unknown Artist',
              bpm: track.mt || 0,
              key: track.mk || '?',
              mode: track.mm || '',
              camelot,
              duration: track.dn || 0,
              albumAr
